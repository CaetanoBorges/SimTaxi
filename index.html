<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="_css/telas-inicio.css">
    <title>HOME</title>
    <style>
        @font-face {
            font-family: principal;
            src: url(assets/font.ttf);
        }
        
        * {
            font-family: principal;
        }
        
        input:focus {
            outline: none;
        }
        
        .background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
        }
    </style>
</head>

<body>
    <div class="root">
        <img src="assets/background.png" class="background">
            
        <div id="main">
        </div>
        <div >
                
                    <input type="text" id="from">
                    <input type="text" id="to">
                    <button>Pesquisar</button>
                    <p id="output"></p>
                
                <div id="mapa-global" style="width:100%;height:100vh;z-index: 99999999;">

                </div>
        </div> 
    </div>

    <script src="assets/jquery.js"></script>
    <script src="assets/lightSlider.js"></script>
    <script src="router.js"></script>
    <script src="js/inicio.js"></script>
    <script src="js/home.js"></script>
    <script src="js/corrida.js"></script>
    <script src="js/motorista.js"></script>
    <script src="components/menu/menu.js"></script>
    <script src="components/pesquisa/pesquisa.js"></script>
    <script src="components/pesquisaRentacar/pesquisaRentacar.js"></script>
    <script src="components/corrida/corrida.js"></script>
    <script src="components/loader/loader.js"></script>
    <script src="components/btnCorrida/btncorrida.js"></script>
    <script src="components/btnMotorista/btnmotorista.js"></script>
    <script src="components/btnCheguei/btncheguei.js"></script>
    <script src="components/btnCancelar/btncancelar.js"></script>
    <script src="components/btnPanico/btnpanico.js"></script>
    <script src="components/slideImg/slideImg.js"></script>
    <script src="components/pendente/pendente.js"></script>
    <script src="components/infoPendente/infopendente.js"></script>
    <script src="components/info/info.js"></script>
    <script src="components/cardRota/rota.js"></script>
    <script src="components/cardCorridas/corridas.js"></script>
     
    <script>
        var root = document.querySelector(".root");
        
        var loader = new debliwuiloader();
        var pesquisa = new debliwuipesquisa();
        var corrida = new debliwuicorrida(loader);
        var menu = new debliwuimenu();
        var btncorrida = new debliwuibtncorrida();

        root.prepend(menu);
        root.prepend(corrida);
        root.prepend(pesquisa);
        root.prepend(btncorrida);
        HOME.corridaStatus();
        CORRIDA.pendente();

        root.prepend(loader);




        


        function initMap(){
            //Localização Inicial
            var inicial = { lat: 55.0302, lng: 29.55 };

            var opcoes = {
                zoom: 7,
                center: inicial,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            }

            //Criação do mapa
            const map = new google.maps.Map(
                document.getElementById("mapa-global"),
                opcoes
            );

            //Servico de direcoes
            var servicoDirecoes = new google.maps.DirectionsService();

            //Direction render objects to display the rouds
            var direcoesDisplay = new google.maps.DirectionsRenderer();

            //Bind the directions to the map
            direcoesDisplay.setMap(map);


            //calc route

            function calcRoute(){
                //Create request
                var request = {
                    origin: document.getElementById("from").value,
                    destination: document.getElementById("to").value,
                    travelMode: google.maps.TravelMode.DRIVING,
                    unitSystem: google.maps.UnitSystem.METRIC
                }

                //Pass the request to the route
                servicoDirecoes.route(request, function(result, status){
                    if(status == google.maps.DirectionsStatus.OK){

                        //display route
                        direcoesDisplay.setDirections(result);

                        //get distance and time
                        const output = document.querySelector("#output");
                        output.innerHTML = result.routes[0].legs[0].distance.text + "<br>" + result.routes[0].legs[0].duration.text;
                    }else{
                        //delete route from map
                        direcoesDisplay.setDirections({routes: []});

                        //center map in inicial position
                        map.setCenter(inicial);

                        //show error message
                        output.innerHTML = "<div class='alert-danger'>Não foi possivel encontrar uma rota entre os endereços</div>"
                    }
                });
            }
            window.calc = calcRoute;
            //Create autocomplite object for all inputs
            var options = {
                types: ['(cities)','(streets)']
            }

            var input1 = document.getElementById("from");
            var autocomplete1 = new google.maps.places.Autocomplete(input1, options);

            var input2 = document.getElementById("to");
            var autocomplete2 = new google.maps.places.Autocomplete(input2, options);

        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBDIBzfwJcp9dUOBuo_6ZgBsEqqUoHwRHY&callback=initMap&libraries=places" defer></script>
</body>

</html>

</html>